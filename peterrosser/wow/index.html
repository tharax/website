<head>
	<link rel="stylesheet" type="text/css" href="./index.css">
</head>

<body onload='addProfessionTables()'>
	<div id="recipes">
	<input class="search" placeholder="Search" />
	  <button class="sort" data-sort="name">
	    Sort
	  </button>
	<table id="recipes-table">
	
    <!-- IMPORTANT, class="list" have to be at tbody -->
    <tbody id="recipes-tbody" class="list">
    <tr>
	<th>profession</th>
	<th>id</th>
	<th>name</th>
	<th>creates</th><th>reagents</th><th>knowrecipe</th><th>knowtransmog</th><th>canbetransmog</th>
	</tr>
    </tbody>
  </table>
  </div>
</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="http://listjs.com/assets/javascripts/list.min.js"></script>

<script src='alchemy.json'></script>
<script src='blacksmithing.json'></script>
<script src='enchanting.json'></script>
<script src='engineering.json'></script>
<script src='herbalism.json'></script>
<script src='inscription.json'></script>
<script src='jewelcrafting.json'></script>
<script src='leatherworking.json'></script>
<script src='mining.json'></script>
<script src='skinning.json'></script>
<script src='tailoring.json'></script>
<script src='archaeology.json'></script>
<script src='cooking.json'></script>
<script src='firstaid.json'></script>

<script type="text/javascript">
	var options = {
		valueNames: [ 'profession','id','name','creates','reagents', 'knowrecipe','knowtransmog','canbetransmog' ],
		// Since there are no elements in the list, this will be used as template.
		item: '<tr><td class="profession"></td><td class="id"></td>  <td class="name"></td><td class="creates"></td>  <td class="reagents"></td><td class="knowrecipe"></td>  <td class="knowtransmog"></td><td class="canbetransmog"></td></tr>'
	};

	var userList = new List('recipes', options);
	function addProfessionTable(obj) {
		for (var i = 0; i < obj.length; i++) {
			userList.add({
				'profession': obj[i].profession,
				'id': obj[i].id,
				'name': obj[i].name,
				'creates': obj[i].creates,
				'reagents': obj[i].reagents,
				'knowrecipe': obj[i].knowrecipe,
				'knowtransmog': obj[i].knowtransmog,
				'canbetransmog': obj[i].canbetransmog
			});
		}
	}

	function addProfessionTables(){
		var tbody = document.getElementById('recipes-tbody');
		var tr = document.createElement('tr');
		var columns = ['profession','id','name','creates','reagents', 'know recipe','know transmog','can be transmog'];
		for (var key in columns) {
			var th = document.createElement('th');
			th.appendChild(document.createTextNode(columns[key]));
			tr.appendChild(th);
		}
		tbody.appendChild(tr);

		// addProfessionTable(alchemy);
		// addProfessionTable(blacksmithing);
		// addProfessionTable(enchanting);
		// addProfessionTable(engineering);
		// addProfessionTable(herbalism);
		// addProfessionTable(inscription);
		// addProfessionTable(jewelcrafting);
		// addProfessionTable(leatherworking);
		// addProfessionTable(mining);
		// addProfessionTable(skinning);
		addProfessionTable(tailoring);
		// addProfessionTable(archaeology);
		// addProfessionTable(cooking);
		// addProfessionTable(firstaid);
	}

	//this code returns the name of the variable, but it triggers deprecicated calls in chrome. I'd like to replace it.
	function window_getVarName(what) {
		for (var name in window) {
			if (window[name]==what) {
				return(name);
			}
		}
		return("");
	}
</script>	